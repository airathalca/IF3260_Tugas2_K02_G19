<!DOCTYPE html>
<html>
  <head>
    <title>Tubes 2 Grafkom</title>
    <!-- vertex shader -->
    <script  id="vertex-shader-3d" type="x-shader/x-vertex">
      attribute vec4 a_position;
      attribute vec3 a_normal;
      attribute vec4 a_color;
      
      uniform mat4 u_normal;
      uniform mat4 u_matrix;
      uniform mat4 u_projMatrix;
      uniform float u_fudgeFactor;
      
      varying highp vec3 v_lighting;
      varying lowp vec4 v_color;
      
      void main() {
        // Multiply the position by the matrix.
        gl_Position = u_projMatrix * u_matrix * a_position;

        // Adjust the z to divide by
        float zToDivideBy = 1.0 + gl_Position.z * u_fudgeFactor;
      
        // Divide x and y by z.
        gl_Position = vec4(gl_Position.xy / zToDivideBy, gl_Position.zw);
        
        // Pass the color to the fragment shader.
        v_color = a_color;

        highp vec3 ambient_light = vec3(0.5, 0.5, 0.5);
        highp vec3 directional_light_color = vec3(1, 1, 1);
        highp vec3 directional_light_direction = vec3(0.85, 0.8, 0.75);
        highp vec4 transformed_normal = u_normal * vec4(a_normal, 1.0);
      
        highp float directional = max(dot(transformed_normal.xyz, directional_light_direction), 0.0);
        v_lighting = ambient_light + (directional_light_color * directional);
      }
    </script>
    <!-- fragment shader -->
    <script  id="fragment-shader-3d" type="x-shader/x-fragment">
      precision mediump float;
      
      // Passed in from the vertex shader.
      varying highp vec3 v_lighting;
      varying lowp vec4 v_color;

      uniform bool u_shading;
      
      void main() {
        if (u_shading) {
          gl_FragColor = vec4(v_color.rgb * v_lighting, v_color.a);
        } else {
          gl_FragColor = v_color;
        }
      }
    </script>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="scripts/main.js"></script>
  </head>
<body>
  <div class="canvas">
    <canvas id="myCanvas"></canvas>
  </div>
	<div class="toolbar">
		<div id="uiContainer">
      <div id="ui">
        <div class="tools-label">PROJECTION TYPE</div>
        <div class="tools">
          <div class="outer">
            <div id="value-shading"></div>
            <input id="orthogonal" type="radio" name="perspective-option" value="orthogonal" checked>
            <label for="orthogonal">Orthogonal</label>
            <input id="perspective" type="radio" name="perspective-option" value="perspective">
            <label for="perspective">Perspective</label>
            <input id="oblique" type="radio" name="perspective-option" value="oblique">
            <label for="oblique">Oblique</label>
          </div>
        </div>
        <br>
        <div class="outer">
          <div class="label">Fudge Factor</div>
          <div id="value-fudgeFactor"></div>
          <input id="slider-fudgeFactor" type="range" min="0.1" max="2" step="0.05"/>
        </div>
        <hr>
        <div class="tools-label">TRANSLATE</div>
        <div class="tools">
          <div class="outer">
            <div class="label">translation-x</div>
            <div id="value-x"></div>
            <input id="slider-x" type="range" min="-360" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">translation-y</div>
            <div id="value-y"></div>
            <input id="slider-y" type="range" min="-360" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">translation-z</div>
            <div id="value-z"></div>
            <input id="slider-z" type="range" min="-800" max="800" step="1"/>
          </div>
        </div>
        <hr>
        <div class="tools-label">ROTATE</div>
        <div class="tools">
          <div class="outer">
            <div class="label">rotation-X</div>
            <div id="value-angleX"></div>
            <input id="slider-angleX" type="range" min="0" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">rotation-Y</div>
            <div id="value-angleY"></div>
            <input id="slider-angleY" type="range" min="0" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">rotation-Z</div>
            <div id="value-angleZ"></div>
            <input id="slider-angleZ" type="range" min="0" max="360" step="1"/>
          </div>
        </div>
        <hr>
        <div class="tools-label">SCALE</div>
        <div class="tools">
          <div class="outer">
            <div class="label">scaling-X</div>
            <div id="value-scaleX"></div>
            <input id="slider-scaleX" type="range" min="0" max="10" step="0.1"/>
          </div>
          <div class="outer">
            <div class="label">scaling-Y</div>
            <div id="value-scaleY"></div>
            <input id="slider-scaleY" type="range" min="0" max="10" step="0.1"/>
          </div>
          <div class="outer">
            <div class="label">scaling-Z</div>
            <div id="value-scaleZ"></div>
            <input id="slider-scaleZ" type="range" min="0" max="10" step="0.1"/>
          </div>
        </div>
        <hr>
        <div class="tools-label">CAMERA</div>
        <div class="tools">
          <div class="outer">
            <div class="label">camera-X</div>
            <div id="value-cameraX"></div>
            <input id="slider-cameraX" type="range" min="0" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">camera-Y</div>
            <div id="value-cameraY"></div>
            <input id="slider-cameraY" type="range" min="0" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">camera-Z</div>
            <div id="value-cameraZ"></div>
            <input id="slider-cameraZ" type="range" min="0" max="360" step="1"/>
          </div>
          <div class="outer">
            <div class="label">camera-radius</div>
            <div id="value-cameraR"></div>
            <input id="slider-cameraR" type="range" min="1" max="360" step="1"/>
          </div>
        </div>
        <hr>
        <div class="tools-label">ZOOM</div>
        <div class="tools">
          <div class="outer">
            <div id="value-zoom"></div>
            <input id="slider-zoom" type="range" min="0.1" max="5" step="0.1"/>
          </div>
        </div>
        <hr>
        <div class="tools-label">SHADING</div>
        <div class="tools">
          <div class="outer">
            <div id="value-shading"></div>
            <input id="check-shading" type="checkbox" />
          </div>
        </div>
        <hr>
        <div>
          <input type="file" id="file" accept=".json" />
        </div>
        <div>
          <button id="save">Save</button>
          <button id="reset">Reset</button>
        </div>
      </div>
    </div>
	</div>
</body>
</html>
